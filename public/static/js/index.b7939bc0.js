(function(e){function n(n){for(var a,i,u=n[0],c=n[1],s=n[2],l=0,f=[];l<u.length;l++)i=u[l],o[i]&&f.push(o[i][0]),o[i]=0;for(a in c)Object.prototype.hasOwnProperty.call(c,a)&&(e[a]=c[a]);g&&g(n);while(f.length)f.shift()();return r.push.apply(r,s||[]),t()}function t(){for(var e,n=0;n<r.length;n++){for(var t=r[n],a=!0,i=1;i<t.length;i++){var c=t[i];0!==o[c]&&(a=!1)}a&&(r.splice(n--,1),e=u(u.s=t[0]))}return e}var a={},o={index:0},r=[];function i(e){return u.p+"static/js/"+({"pages-chat_detail":"pages-chat_detail","pages-tabbar-chat":"pages-tabbar-chat","pages-tabbar-friend":"pages-tabbar-friend"}[e]||e)+"."+{"pages-chat_detail":"03fcfc8d","pages-tabbar-chat":"08553e54","pages-tabbar-friend":"94d3806c"}[e]+".js"}function u(n){if(a[n])return a[n].exports;var t=a[n]={i:n,l:!1,exports:{}};return e[n].call(t.exports,t,t.exports,u),t.l=!0,t.exports}u.e=function(e){var n=[],t=o[e];if(0!==t)if(t)n.push(t[2]);else{var a=new Promise(function(n,a){t=o[e]=[n,a]});n.push(t[2]=a);var r,c=document.createElement("script");c.charset="utf-8",c.timeout=120,u.nc&&c.setAttribute("nonce",u.nc),c.src=i(e),r=function(n){c.onerror=c.onload=null,clearTimeout(s);var t=o[e];if(0!==t){if(t){var a=n&&("load"===n.type?"missing":n.type),r=n&&n.target&&n.target.src,i=new Error("Loading chunk "+e+" failed.\n("+a+": "+r+")");i.type=a,i.request=r,t[1](i)}o[e]=void 0}};var s=setTimeout(function(){r({type:"timeout",target:c})},12e4);c.onerror=c.onload=r,document.head.appendChild(c)}return Promise.all(n)},u.m=e,u.c=a,u.d=function(e,n,t){u.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:t})},u.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},u.t=function(e,n){if(1&n&&(e=u(e)),8&n)return e;if(4&n&&"object"===typeof e&&e&&e.__esModule)return e;var t=Object.create(null);if(u.r(t),Object.defineProperty(t,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var a in e)u.d(t,a,function(n){return e[n]}.bind(null,a));return t},u.n=function(e){var n=e&&e.__esModule?function(){return e["default"]}:function(){return e};return u.d(n,"a",n),n},u.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},u.p="/",u.oe=function(e){throw console.error(e),e};var c=window["webpackJsonp"]=window["webpackJsonp"]||[],s=c.push.bind(c);c.push=n,c=c.slice();for(var l=0;l<c.length;l++)n(c[l]);var g=s;r.push([0,"chunk-vendors"]),t()})({0:function(e,n,t){e.exports=t("2d1f")},"07bc":function(e,n,t){var a=t("0e55");"string"===typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);var o=t("4f06").default;o("482474da",a,!0,{sourceMap:!1,shadowMode:!1})},"0e55":function(e,n,t){n=e.exports=t("2350")(!1),n.push([e.i,"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\r\n/*每个页面公共css */",""])},"0e60":function(e,n,t){"use strict";var a=t("288e");Object.defineProperty(n,"__esModule",{value:!0}),n.chatFormatDate=c,n._formatDate=s,n.getPath=l,n.getChatId=g,n.WS_DOMAIN=n.DOMAIN=n.FilePath=void 0,t("3b2b"),t("a481");var o=a(t("e814")),r="https://bsit.oss-cn-hangzhou.aliyuncs.com/";n.FilePath=r;var i="http://chat.xiemy.cn/";n.DOMAIN=i;var u="ws://chat.xiemy.cn";function c(e,n){e*=1e3;var t=new Date,a=new Date((0,o.default)(e));console.log(t);var r=t.getFullYear(),i=t.getMonth()+1,u=t.getDate(),c=a.getFullYear(),l=a.getMonth()+1,g=a.getDate(),f="",d=n?" "+s(a,"hh:mm"):"";if(r==c){var p=t.getTime(),h=e,b=p-h;if(i==l&&u==g)f=b<6e4?"刚刚":s(a,"hh:mm");else{var _=new Date;_.setDate(_.getDate()-1);var y=new Date;if(y.setDate(y.getDate()-2),l==_.getMonth()+1&&g==_.getDate())f="昨天"+d;else if(l==y.getMonth()+1&&g==y.getDate())f="前天"+d;else{var m=b/36e5;if(m<=168){var v=new Array(7);v[0]="星期日",v[1]="星期一",v[2]="星期二",v[3]="星期三",v[4]="星期四",v[5]="星期五",v[6]="星期六";var S=v[a.getDay()];f=S+d}else f=s(a,"yyyy/M/d")+d}}}else f=s(a,"yyyy/M/d")+d;return f}function s(e,n){var t={"M+":e.getMonth()+1,"d+":e.getDate(),"h+":e.getHours(),"m+":e.getMinutes(),"s+":e.getSeconds(),"q+":Math.floor((e.getMonth()+3)/3),S:e.getMilliseconds()};for(var a in/(y+)/.test(n)&&(n=n.replace(RegExp.$1,(e.getFullYear()+"").substr(4-RegExp.$1.length))),t)new RegExp("("+a+")").test(n)&&(n=n.replace(RegExp.$1,1==RegExp.$1.length?t[a]:("00"+t[a]).substr((""+t[a]).length)));return n}function l(e,n,t){if(!e)return"";var a=/^https?:\/\//i;return a.test(e)?e:this.FilePath+e}function g(e,n,t){var a=e>n?[n,e]:[e,n];return a.join(new Array((0,o.default)(t)+1).join("_"))}n.WS_DOMAIN=u},"2d1f":function(e,n,t){"use strict";var a=t("e54b"),o=t("288e"),r=o(t("cebc"));t("cadf"),t("551c"),t("097d"),t("db90"),t("1c31");var i=o(t("e143")),u=o(t("c0e2")),c=a(t("0e60"));i.default.config.productionTip=!1,i.default.prototype.$T=c,u.default.mpType="app";var s=new i.default((0,r.default)({},u.default));s.$mount()},5455:function(e,n,t){"use strict";t.r(n);var a=t("faea"),o=t.n(a);for(var r in a)"default"!==r&&function(e){t.d(n,e,function(){return a[e]})}(r);n["default"]=o.a},acb5:function(e,n,t){"use strict";var a=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("App",{attrs:{keepAliveInclude:e.keepAliveInclude}})},o=[];t.d(n,"a",function(){return a}),t.d(n,"b",function(){return o})},c0e2:function(e,n,t){"use strict";t.r(n);var a=t("acb5"),o=t("5455");for(var r in o)"default"!==r&&function(e){t.d(n,e,function(){return o[e]})}(r);t("d4f3");var i=t("2877"),u=Object(i["a"])(o["default"],a["a"],a["b"],!1,null,null,null);n["default"]=u.exports},d4f3:function(e,n,t){"use strict";var a=t("07bc"),o=t.n(a);o.a},db90:function(e,n,t){"use strict";(function(e){var n=t("288e"),a=n(t("5176")),o=n(t("e143"));e["____2471D72____"]=!0,delete e["____2471D72____"],e.__uniConfig={globalStyle:{navigationBarTextStyle:"black",navigationBarTitleText:"喵喵乐淘",navigationBarBackgroundColor:"#F8F8F8",backgroundColor:"#F8F8F8"},tabBar:{borderStyle:"black",backgroundColor:"#333",color:"#8F8F94",selectedColor:"#f33e54",list:[{pagePath:"pages/tabbar/chat",iconPath:"static/img/tabbar/news.png",selectedIconPath:"static/img/tabbar/newsactive.png",text:"消息",redDot:!1,badge:""},{pagePath:"pages/tabbar/friend",iconPath:"static/img/tabbar/me.png",selectedIconPath:"static/img/tabbar/meactive.png",text:"好友",redDot:!1,badge:""}]},condition:{current:0,list:[{name:"",path:"",query:""}]},"app-plus":{softinputMode:"adjustResize"}},e.__uniConfig.router={mode:"hash",base:"/"},e.__uniConfig["async"]={loading:"AsyncLoading",error:"AsyncError",delay:200,timeout:3e3},e.__uniConfig.debug=!1,e.__uniConfig.networkTimeout={request:6e3,connectSocket:6e3,uploadFile:6e3,downloadFile:6e3},e.__uniConfig.sdkConfigs={},e.__uniConfig.qqMapKey="XVXBZ-NDMC4-JOGUS-XGIEE-QVHDZ-AMFV2",e.__uniConfig.nvue={"flex-direction":"column"},o.default.component("pages-tabbar-chat",function(e){var n={component:t.e("pages-tabbar-chat").then(function(){return e(t("3045"))}.bind(null,t)).catch(t.oe),delay:__uniConfig["async"].delay,timeout:__uniConfig["async"].timeout};return __uniConfig["async"]["loading"]&&(n.loading={name:"SystemAsyncLoading",render:function(e){return e(__uniConfig["async"]["loading"])}}),__uniConfig["async"]["error"]&&(n.error={name:"SystemAsyncError",render:function(e){return e(__uniConfig["async"]["error"])}}),n}),o.default.component("pages-tabbar-friend",function(e){var n={component:t.e("pages-tabbar-friend").then(function(){return e(t("7e3c"))}.bind(null,t)).catch(t.oe),delay:__uniConfig["async"].delay,timeout:__uniConfig["async"].timeout};return __uniConfig["async"]["loading"]&&(n.loading={name:"SystemAsyncLoading",render:function(e){return e(__uniConfig["async"]["loading"])}}),__uniConfig["async"]["error"]&&(n.error={name:"SystemAsyncError",render:function(e){return e(__uniConfig["async"]["error"])}}),n}),o.default.component("pages-chat_detail",function(e){var n={component:t.e("pages-chat_detail").then(function(){return e(t("808c"))}.bind(null,t)).catch(t.oe),delay:__uniConfig["async"].delay,timeout:__uniConfig["async"].timeout};return __uniConfig["async"]["loading"]&&(n.loading={name:"SystemAsyncLoading",render:function(e){return e(__uniConfig["async"]["loading"])}}),__uniConfig["async"]["error"]&&(n.error={name:"SystemAsyncError",render:function(e){return e(__uniConfig["async"]["error"])}}),n}),e.__uniRoutes=[{path:"/",alias:"/pages/tabbar/chat",component:{render:function(e){return e("Page",{props:(0,a.default)({isQuit:!0,isEntry:!0,isTabBar:!0,tabBarIndex:0},__uniConfig.globalStyle,{navigationBarTitleText:"喵喵乐淘"})},[e("pages-tabbar-chat",{slot:"page"})])}},meta:{id:1,name:"pages-tabbar-chat",isNVue:!1,pagePath:"pages/tabbar/chat",isQuit:!0,isEntry:!0,isTabBar:!0,tabBarIndex:0,windowTop:44}},{path:"/pages/tabbar/friend",component:{render:function(e){return e("Page",{props:(0,a.default)({isQuit:!0,isTabBar:!0,tabBarIndex:1},__uniConfig.globalStyle,{})},[e("pages-tabbar-friend",{slot:"page"})])}},meta:{id:2,name:"pages-tabbar-friend",isNVue:!1,pagePath:"pages/tabbar/friend",isQuit:!0,isTabBar:!0,tabBarIndex:1,windowTop:44}},{path:"/pages/chat_detail",component:{render:function(e){return e("Page",{props:(0,a.default)({},__uniConfig.globalStyle,{})},[e("pages-chat_detail",{slot:"page"})])}},meta:{name:"pages-chat_detail",isNVue:!1,pagePath:"pages/chat_detail",windowTop:44}},{path:"/preview-image",component:{render:function(e){return e("Page",{props:{navigationStyle:"custom"}},[e("system-preview-image",{slot:"page"})])}},meta:{name:"preview-image",pagePath:"/preview-image"}},{path:"/choose-location",component:{render:function(e){return e("Page",{props:{navigationStyle:"custom"}},[e("system-choose-location",{slot:"page"})])}},meta:{name:"choose-location",pagePath:"/choose-location"}},{path:"/open-location",component:{render:function(e){return e("Page",{props:{navigationStyle:"custom"}},[e("system-open-location",{slot:"page"})])}},meta:{name:"open-location",pagePath:"/open-location"}}]}).call(this,t("c8ba"))},faea:function(e,n,t){"use strict";var a;Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o=!1;function r(e){var n=uni.getStorageSync("auth_token");if(!n)return!1;uni.connectSocket({url:e.$T.WS_DOMAIN+"?token="+uni.getStorageSync("auth_token"),header:{"content-type":"application/json",authorizations:uni.getStorageSync("auth_token")},method:"POST"}),uni.onSocketOpen(function(e){o=!0,a=Date.parse(new Date)/1e3,console.log("连接成功")}),uni.onSocketMessage(function(e){a=Date.parse(new Date)/1e3;var n=JSON.parse(e.data);n.code}),uni.onSocketClose(function(){o=!1,uni.closeSocket(),console.log("断开连接")}),uni.onSocketError(function(e){console.log(e)})}var i={onLaunch:function(e){var n=e.query;n.isService?uni.setStorage({key:"isService",data:!0}):uni.setStorage({key:"isService",data:!1}),n.token&&uni.setStorageSync("auth_token",n.token);var t=this;uni.request({url:t.$T.DOMAIN+"user/index",method:"post",header:{authorizations:"bear "+uni.getStorageSync("auth_token")},success:function(e){var n=e.data;if(n.code){var a=n.result;uni.setStorageSync("mine",a.mine),uni.setStorage({key:"friendList",data:a.friend}),r(t)}}}),setInterval(function(){o?a<Date.parse(new Date)/1e3-60&&uni.sendSocketMessage({data:"ping"}):r(t)},5e3)},onShow:function(){console.log("App Show")},onHide:function(){console.log("App Hide")}};n.default=i}});